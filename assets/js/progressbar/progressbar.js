export default class{constructor(t){this.progressbar=t,this.properties={},this.dragging=!1,this.defineAttributes(),this.defineProperties(),this.addEventListeners()}defineAttributes(){this.attributes={min:0,max:1,step:.1,value:0},Object.keys(this.attributes).forEach(t=>this[t]=+this.progressbar.getAttribute("attr-"+t)||this.attributes[t])}defineProperties(){this.properties.dragging={get:()=>this.dragging},this.properties.min={get:()=>this.min,set:t=>this.min=+t},this.properties.max={get:()=>this.max,set:t=>this.max=+t},this.properties.step={get:()=>this.step,set:t=>this.step=+t},this.properties.value={get:()=>this.value,set:t=>this.update(t)},this.properties.onchange={set:t=>this.onchange=t},Object.keys(this.properties).forEach(t=>Object.defineProperty(this.progressbar,t,this.properties[t]))}addEventListeners(){this.progressbar.addEventListener("mousedown",this.onMouseDown.bind(this)),this.progressbar.addEventListener("touchstart",this.onTouchStart.bind(this)),document.addEventListener("mousemove",this.onMouseMove.bind(this)),document.addEventListener("mouseup",this.onMouseUp.bind(this)),document.addEventListener("mouseleave",this.onMouseUp.bind(this)),document.addEventListener("touchmove",this.onTouchMove.bind(this)),document.addEventListener("touchend",this.onTouchEnd.bind(this)),document.addEventListener("touchcancel",this.onTouchEnd.bind(this))}eventHandler(t){"function"==typeof this[t]&&this[t]()}eventChange(t){const e=this.progressbar.getBoundingClientRect();let s=t-e.left,i=(s=Math.max(0,Math.min(s,e.width)))/e.width*(this.max-this.min)+this.min;this.progressbar.value=Math.round(i/this.step)*this.step,this.eventHandler("onchange")}onMouseDown(t){this.dragging=!0,this.eventChange(t.clientX)}onMouseMove(t){this.dragging&&this.eventChange(t.clientX)}onMouseUp(){this.dragging=!1}onTouchStart(t){this.dragging=!0,this.eventChange(t.touches[0].clientX)}onTouchMove(t){this.dragging&&this.eventChange(t.touches[0].clientX)}onTouchEnd(){this.dragging=!1}update(t){this.value=+t;const e=this.value/this.max*100;this.progressbar.style.setProperty("--progressbar-transform",e+"%")}};